<!DOCTYPE HTML>
<html>

<head>
    <title>Eyedeea Photos</title>
    <meta charset="utf-8" />
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/search.css" />
    <style>
        /* Align radio buttons vertically in table cells */
        #source-summary-table-body td:first-child {
            vertical-align: middle;
        }
        #source-summary-table-body input[type="radio"] + label {
            margin-bottom: 0;
            line-height: 1.5;
        }
        #source-summary-table-body input[type="radio"] + label:before {
            top: 35%;
            transform: translateY(-65%);
        }
        
        /* Make delete dialog smaller */
        #deleteDialog {
            max-width: 500px;
            width: 90vw;
            padding: 1.5em;
        }
        
        #deleteDialog section {
            max-height: none;
            overflow: visible;
            padding: 0;
        }
        
        #deleteDialog .col-12 {
            padding: 0;
            margin-bottom: 1em;
        }
        
        #deleteDialog header.main {
            margin-bottom: 1em;
        }
        
        #deleteDialog h2 {
            margin-bottom: 0;
        }
    </style>
</head>

<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Main -->
        <div id="main">
            <div class="inner">

                <!-- Header -->
                <header id="header">
                    <div class="header-container">
                        <div class="header-col header-col-img">
                            <a href="../index.html" class="slideshow-link" title="Go back to slide show">
                                <img src="../images/slideshow.jpg" id="img_slideshow" alt="Back to Slide Show" class="slideshow-icon" />
                            </a>
                        </div>
                        <div class="header-col header-col-caption">
                            <a href="../index.html" class="logo" title="Eyedeea Photos Home">                            
                                <h2>Eyedeea Photos</h2>
                                <h3>Configuration</h3>
                            </a>
                            <ul class="icons">
                                <li><a href="https://github.com/eyedia/EyedeeaPhotos" target="_blank"
                                    class="fa-icon fab fa-github" aria-label="GitHub"></a></li>
                                <li><a href="https://eyedeeaphotos.eyediatech.com/" target="_blank"
                                    class="fa-icon fas fa-globe" aria-label="Website"></a></li>
                            </ul>
                        </div>
                    </div>
                </header>
                <!-- Content -->
                <div style="height: 10px;"></div>
                <div class="col-12">
                    <h3 id="system_summary"></h3>
                    <a href="#" onclick="window.dialog.showModal();" class="button primary icon"
                        style="vertical-align: middle;">Add New Source</a>
                <a id="deleteSourceBtn" href="#" onclick="handleDeleteClick(event);" class="button" 
                   style="vertical-align: middle; margin-left: 10px;" disabled>Delete</a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 40px;"></th>
                            <th>Source</th>
                            <th>Photos</th>
                            <th class="hide-mobile">Last Scanned</th>
                        </tr>
                    </thead>
                    <tbody id="source-summary-table-body">
                    </tbody>
                    <ul id="pagination" class="pagination">

                    </ul>
                </table>

                <dialog id="dialog">
                    <section>
                        <header class="main">
                            <h2 id="title">Add New Photo Source</h2>
                        </header>
                        <div class="col-12">                            
                                <div class="row gtr-uniform">
                                    <div class="col-12 col-12-xsmall">
                                        <label for="type">Type</label>
                                        <select id="source_type" name="source_type" onchange="toggleFields()">
                                            <option value="">Select Source Type</option>
                                            <option value="fs">File System</option>
                                            <option value="nas">Synology Photos</option>
                                        </select>
                                    </div>

                                    <div id="nasFields" class="col-12 hidden">
                                        <div class="col-12 col-12-xsmall">
                                            <label for="url">URL</label>
                                            <input type="text" id="url" name="url" placeholder="https://your-nas-url.com" oninput="validate_fields()">
                                        </div>
                                        <div class="col-12 col-12-xsmall">
                                            <label for="username">User</label>
                                            <input type="text" id="username" name="username"
                                                placeholder="Username"
                                                oninput="validate_fields()">
                                        </div>
                                        <div class="col-12 col-12-xsmall">
                                            <label for="password">Password</label>
                                            <input type="password" id="password" name="password"
                                                placeholder="Password"
                                                oninput="validate_fields()">
                                        </div>
                                    </div>

                                    <div id="fsFields" class="col-12 hidden">
                                        <div class="col-12">
                                            <label for="directory">Selected Directory</label>
                                            <input type="text" id="directory" name="directory"
                                                placeholder="Select a directory below or type/paste"
                                                oninput="validate_fields()">
                                        </div>
                                        <div class="col-12">
                                            <div id="driveBrowser" class="drive-browser">
                                                <div class="drive-browser-container">
                                                    <div class="drive-list-panel">
                                                        <h4>Available drives</h4>
                                                        <div id="driveList" class="drive-list">
                                                            <div class="loading">Loading drives...</div>
                                                        </div>
                                                    </div>
                                                    <div class="directory-tree-panel">
                                                        <h4>Directories</h4>
                                                        <div id="directoryTree" class="directory-tree">
                                                            <div class="empty-state">Select a drive to browse</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12" id="sourceNameButtonRow">
                                        <div class="row gtr-uniform">
                                            <div class="col-8 col-12-xsmall">
                                                <label for="source_name">Name</label>
                                                <input type="text" id="source_name" name="source_name"
                                                    placeholder="Enter a name for this source"
                                                    oninput="validate_fields()">
                                            </div>
                                            <div class="col-4 col-12-xsmall" style="display: flex; align-items: flex-end;">
                                                <a id="add" class="button primary icon solid fa-save" style="width: 100%;" disabled>Add</a>
                                            </div>
                                        </div>
                                        <div id="message" class="message hidden"></div>
                                    </div>
                                </div>
                           
                        </div>
                    </section>                   
                    <button class="close-btn" onclick="document.getElementById('dialog').close()">&times;</button>
                </dialog>

                <!-- Delete Confirmation Dialog -->
                <dialog id="deleteDialog">
                    <section>
                        <header class="main">
                            <h2 id="deleteTitle">Delete Source</h2>
                        </header>
                        <div class="col-12">
                            <p id="deleteMessage"></p>
                            <div id="deleteError" class="message error hidden"></div>
                        </div>
                        <div class="col-12" style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                            <a id="deleteYesBtn" href="#" onclick="confirmDelete(); return false;" 
                               class="button primary">Yes</a>
                            <a id="deleteNoBtn" href="#" onclick="document.getElementById('deleteDialog').close(); return false;" 
                               class="button" style="margin-right: auto;">No</a>                            
                        </div>
                    </section>
                    <button class="close-btn" onclick="document.getElementById('deleteDialog').close()">&times;</button>
                </dialog>
            </div>
        </div>

        <!-- Sidebar -->
        <div id="sidebar">
            <div class="inner">

                <!-- Search -->
                <section id="search" class="alt">
                    <searchbox method="post" action="#">
                        <input type="text" id="g_search_keywords" onkeypress="g_search_entery_key(event)"
                            placeholder="Search" />
                    </searchbox>
                </section>
                <!-- Menu -->
                <nav id="menu">                    
                    <ul>
                        <li><a href="index.html">System</a></li>
                        <li><a href="player.html">Filters</a></li>
                        <li><a href="photos.html">Photos</a></li>
                        <li>
                            <span id="nav_sources_ctr" class="opener active">Sources</span>
                            <ul id="nav_sources">
                                <!-- Dynamically filled-->
                            </ul>
                        </li>
                        <li><a href="logs.html">Logs</a></li>
                        <li><a href="downloads.html">Downloads</a></li>
                        <li><a href="../">Back</a></li>
                    </ul>
                </nav>
                <!-- Footer -->
                <footer id="footer">
                    <p class="copyright">&copy; Eyedia Technologies. Licensed under <a href="https://github.com/eyedia/EyedeeaPhotos/blob/main/LICENSE" target="_blank">GNU General Public License v3.0</a>.</p>
                    <p id="app-version">
                        <span id="version-text">Loading version...</span>
                        <span id="update-badge" class="hidden" onclick="checkForUpdates()"> â€¢ Update available!</span>
                    </p>
                </footer>

            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/manage_main.js"></script>
    <script src="assets/js/paginated_table.js"></script>
    <script src="assets/js/eyedeea_manage.js"></script>
</body>

</html>